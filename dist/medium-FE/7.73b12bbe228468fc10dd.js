(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"6epW":function(r,e,t){"use strict";t.r(e),t.d(e,"AuthRoutingModule",(function(){return O}));var i=t("tyNb"),s=t("fXoL"),o=t("lGQG"),n=t("iiya"),c=t("flj8"),b=t("ofXK"),a=t("3Pt+");function d(r,e){1&r&&(s.Wb(0,"div",17),s.yc(1," Email is required! "),s.Vb())}function u(r,e){1&r&&(s.Wb(0,"div"),s.yc(1,"Password is required"),s.Vb())}function l(r,e){1&r&&(s.Wb(0,"div"),s.yc(1," Password must be at least 4 characters "),s.Vb())}function m(r,e){if(1&r&&(s.Wb(0,"div",17),s.xc(1,u,2,0,"div",18),s.xc(2,l,2,0,"div",18),s.Vb()),2&r){s.hc();const r=s.pc(12);s.Gb(1),s.kc("ngIf",r.errors.required),s.Gb(1),s.kc("ngIf",r.errors.minlength)}}function f(r,e){if(1&r&&(s.Wb(0,"div",17),s.yc(1),s.Vb()),2&r){const r=s.hc(2);s.Gb(1),s.Ac(" Login failed: ",r.errorMess," ")}}function g(r,e){if(1&r){const r=s.Xb();s.Wb(0,"form",6,7),s.dc("ngSubmit",(function(){s.rc(r);const e=s.pc(1),t=s.hc();return e.form.valid&&t.onSubmit()})),s.Wb(2,"div",8),s.Wb(3,"label",9),s.yc(4,"Email"),s.Vb(),s.Wb(5,"input",10,11),s.dc("ngModelChange",(function(e){return s.rc(r),s.hc().form.email=e})),s.Vb(),s.xc(7,d,2,0,"div",12),s.Vb(),s.Wb(8,"div",8),s.Wb(9,"label",13),s.yc(10,"Password"),s.Vb(),s.Wb(11,"input",14,15),s.dc("ngModelChange",(function(e){return s.rc(r),s.hc().form.password=e})),s.Vb(),s.xc(13,m,3,2,"div",12),s.Vb(),s.Wb(14,"div",8),s.Wb(15,"button",16),s.yc(16," Login "),s.Vb(),s.Vb(),s.Wb(17,"div",8),s.xc(18,f,2,1,"div",12),s.Vb(),s.Vb()}if(2&r){const r=s.pc(1),e=s.pc(6),t=s.pc(12),i=s.hc();s.Gb(5),s.kc("ngModel",i.form.email),s.Gb(2),s.kc("ngIf",r.submitted&&e.invalid),s.Gb(4),s.kc("ngModel",i.form.password),s.Gb(2),s.kc("ngIf",r.submitted&&t.invalid),s.Gb(5),s.kc("ngIf",r.submitted&&i.isLoginFailed)}}function v(r,e){if(1&r&&(s.Wb(0,"div",19),s.yc(1),s.Vb()),2&r){const r=s.hc();s.Gb(1),s.Ac(" Logged in as ",r.roles,". ")}}let h=(()=>{class r{constructor(r,e,t,i,s){this.authService=r,this.tokenStorage=e,this.router=t,this.accountService=i,this.route=s,this.form={},this.isLoggedIn=!1,this.isLoginFailed=!1,this.errorMess="",this.roles=[]}ngOnInit(){this.returnUrl=this.route.snapshot.queryParams[this.returnUrl]||"/blogs/list"}onSubmit(){this.authService.login(this.form).subscribe(r=>{this.router.navigateByUrl(this.returnUrl),this.tokenStorage.saveToken(r.accessToken),console.log(r.accessToken),this.tokenStorage.saveAccountId(r.id),console.log(r),this.tokenStorage.saveStatusWhenUserLogged("logged"),this.accountService.findAccountById(r.id).subscribe(r=>{this.tokenStorage.saveUserAvatar(r.avatar),this.roles=r.roles}),this.isLoginFailed=!1,this.isLoggedIn=!0},r=>{this.errorMess=r.error.message,this.isLoginFailed=!0})}}return r.\u0275fac=function(e){return new(e||r)(s.Rb(o.a),s.Rb(n.a),s.Rb(i.b),s.Rb(c.a),s.Rb(i.a))},r.\u0275cmp=s.Lb({type:r,selectors:[["app-login"]],decls:6,vars:2,consts:[[1,"container",2,"width","30%"],[1,"col-md-12"],[1,"card","card-container"],["id","profile-img","src","//ssl.gstatic.com/accounts/ui/avatar_2x.png",1,"profile-img-card"],["name","form","novalidate","",3,"ngSubmit",4,"ngIf"],["class","alert alert-success",4,"ngIf"],["name","form","novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-group"],["for","username"],["type","text","name","username","required","",1,"form-control",3,"ngModel","ngModelChange"],["email","ngModel"],["class","alert alert-danger","role","alert",4,"ngIf"],["for","password"],["type","password","name","password","required","","minlength","4",1,"form-control",3,"ngModel","ngModelChange"],["password","ngModel"],[1,"btn","btn-primary","btn-block"],["role","alert",1,"alert","alert-danger"],[4,"ngIf"],[1,"alert","alert-success"]],template:function(r,e){1&r&&(s.Wb(0,"div",0),s.Wb(1,"div",1),s.Wb(2,"div",2),s.Sb(3,"img",3),s.xc(4,g,19,5,"form",4),s.xc(5,v,2,1,"div",5),s.Vb(),s.Vb(),s.Vb()),2&r&&(s.Gb(4),s.kc("ngIf",!e.isLoggedIn),s.Gb(1),s.kc("ngIf",e.isLoggedIn))},directives:[b.k,a.u,a.l,a.m,a.a,a.q,a.k,a.n,a.i],styles:[""]}),r})();function p(r,e){1&r&&(s.Wb(0,"div"),s.yc(1,"First Name is required"),s.Vb())}function k(r,e){if(1&r&&(s.Wb(0,"div",16),s.xc(1,p,2,0,"div",17),s.Vb()),2&r){const r=s.hc();s.Gb(1),s.kc("ngIf",r.f.firstName.errors.required)}}function W(r,e){1&r&&(s.Wb(0,"div"),s.yc(1,"Last Name is required"),s.Vb())}function y(r,e){if(1&r&&(s.Wb(0,"div",16),s.xc(1,W,2,0,"div",17),s.Vb()),2&r){const r=s.hc();s.Gb(1),s.kc("ngIf",r.f.lastName.errors.required)}}function V(r,e){1&r&&(s.Wb(0,"div"),s.yc(1,"Nick Name is required"),s.Vb())}function w(r,e){if(1&r&&(s.Wb(0,"div",16),s.xc(1,V,2,0,"div",17),s.Vb()),2&r){const r=s.hc();s.Gb(1),s.kc("ngIf",r.f.nickName.errors.required)}}function G(r,e){1&r&&(s.Wb(0,"div"),s.yc(1,"BirthDay is required"),s.Vb())}function S(r,e){if(1&r&&(s.Wb(0,"div",16),s.xc(1,G,2,0,"div",17),s.Vb()),2&r){const r=s.hc();s.Gb(1),s.kc("ngIf",r.f.birthDay.errors.required)}}function I(r,e){1&r&&(s.Wb(0,"div"),s.yc(1,"PhoneNumber is required"),s.Vb())}function N(r,e){if(1&r&&(s.Wb(0,"div",16),s.xc(1,I,2,0,"div",17),s.Vb()),2&r){const r=s.hc();s.Gb(1),s.kc("ngIf",r.f.phoneNumber.errors.required)}}function C(r,e){1&r&&(s.Wb(0,"div"),s.yc(1,"Email is required"),s.Vb())}function x(r,e){1&r&&(s.Wb(0,"div"),s.yc(1,"Email must be a valid email address"),s.Vb())}function q(r,e){if(1&r&&(s.Wb(0,"div",16),s.xc(1,C,2,0,"div",17),s.xc(2,x,2,0,"div",17),s.Vb()),2&r){const r=s.hc();s.Gb(1),s.kc("ngIf",r.f.email.errors.required),s.Gb(1),s.kc("ngIf",r.f.email.errors.email)}}function P(r,e){1&r&&(s.Wb(0,"div"),s.yc(1,"Password is required"),s.Vb())}function L(r,e){1&r&&(s.Wb(0,"div"),s.yc(1,"Password must be at least 6 characters"),s.Vb())}function M(r,e){if(1&r&&(s.Wb(0,"div",16),s.xc(1,P,2,0,"div",17),s.xc(2,L,2,0,"div",17),s.Vb()),2&r){const r=s.hc();s.Gb(1),s.kc("ngIf",r.f.password.errors.required),s.Gb(1),s.kc("ngIf",r.f.password.errors.minlength)}}function R(r,e){1&r&&(s.Wb(0,"div"),s.yc(1,"Confirm Password is required"),s.Vb())}function F(r,e){1&r&&(s.Wb(0,"div"),s.yc(1,"Passwords must match"),s.Vb())}function E(r,e){if(1&r&&(s.Wb(0,"div",16),s.xc(1,R,2,0,"div",17),s.xc(2,F,2,0,"div",17),s.Vb()),2&r){const r=s.hc();s.Gb(1),s.kc("ngIf",r.f.confirmPassword.errors.required),s.Gb(1),s.kc("ngIf",r.f.confirmPassword.errors.mustMatch)}}const B=function(r){return{"is-invalid":r}};let U=(()=>{class r{constructor(r,e,t){this.formBuilder=r,this.authService=e,this.route=t,this.submitted=!1}ngOnInit(){this.registerForm=this.formBuilder.group({firstName:["",a.s.required],lastName:["",a.s.required],nickName:["",a.s.required],birthDay:["",a.s.required],phoneNumber:["",a.s.required],email:["",[a.s.required,a.s.email]],password:["",[a.s.required,a.s.minLength(6)]],confirmPassword:["",a.s.required]},{validator:r=>{const e=r.controls.confirmPassword;e.errors&&!e.errors.mustMatch||e.setErrors(r.controls.password.value!==e.value?{mustMatch:!0}:null)}})}get f(){return this.registerForm.controls}onSubmit(){this.submitted=!0,this.registerForm.invalid||this.authService.register(this.registerForm.value).subscribe(r=>{console.log(r),alert("REGISTER SUCCCESSS ! \n\nResponse form htttp "+JSON.stringify(r)),this.route.navigate(["auth/login"])})}}return r.\u0275fac=function(e){return new(e||r)(s.Rb(a.c),s.Rb(o.a),s.Rb(i.b))},r.\u0275cmp=s.Lb({type:r,selectors:[["app-regitration"]],decls:50,vars:33,consts:[[1,"jumbotron"],[1,"container"],[1,"row"],[1,"col-md-6","offset-md-3"],[3,"formGroup","ngSubmit"],[1,"form-group"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],["type","text","formControlName","nickName",1,"form-control",3,"ngClass"],["type","date","formControlName","birthDay",1,"form-control",3,"ngClass"],["type","text","formControlName","phoneNumber",1,"form-control",3,"ngClass"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"btn","btn-primary"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(r,e){1&r&&(s.Wb(0,"div",0),s.Wb(1,"div",1),s.Wb(2,"div",2),s.Wb(3,"div",3),s.Wb(4,"h3"),s.yc(5,"Registration to join Blog Phong Thuy"),s.Vb(),s.Wb(6,"form",4),s.dc("ngSubmit",(function(){return e.onSubmit()})),s.Wb(7,"div",5),s.Wb(8,"label"),s.yc(9,"First Name"),s.Vb(),s.Sb(10,"input",6),s.xc(11,k,2,1,"div",7),s.Vb(),s.Wb(12,"div",5),s.Wb(13,"label"),s.yc(14,"Last Name"),s.Vb(),s.Sb(15,"input",8),s.xc(16,y,2,1,"div",7),s.Vb(),s.Wb(17,"div",5),s.Wb(18,"label"),s.yc(19,"Nick Name"),s.Vb(),s.Sb(20,"input",9),s.xc(21,w,2,1,"div",7),s.Vb(),s.Wb(22,"div",5),s.Wb(23,"label"),s.yc(24,"Birthday"),s.Vb(),s.Sb(25,"input",10),s.xc(26,S,2,1,"div",7),s.Vb(),s.Wb(27,"div",5),s.Wb(28,"label"),s.yc(29,"Phone Number"),s.Vb(),s.Sb(30,"input",11),s.xc(31,N,2,1,"div",7),s.Vb(),s.Wb(32,"div",5),s.Wb(33,"label"),s.yc(34,"Email"),s.Vb(),s.Sb(35,"input",12),s.xc(36,q,3,2,"div",7),s.Vb(),s.Wb(37,"div",5),s.Wb(38,"label"),s.yc(39,"Password"),s.Vb(),s.Sb(40,"input",13),s.xc(41,M,3,2,"div",7),s.Vb(),s.Wb(42,"div",5),s.Wb(43,"label"),s.yc(44,"Confirm Password"),s.Vb(),s.Sb(45,"input",14),s.xc(46,E,3,2,"div",7),s.Vb(),s.Wb(47,"div",5),s.Wb(48,"button",15),s.yc(49,"Register"),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb(),s.Vb()),2&r&&(s.Gb(6),s.kc("formGroup",e.registerForm),s.Gb(4),s.kc("ngClass",s.mc(17,B,e.submitted&&e.f.firstName.errors)),s.Gb(1),s.kc("ngIf",e.submitted&&e.f.firstName.errors),s.Gb(4),s.kc("ngClass",s.mc(19,B,e.submitted&&e.f.lastName.errors)),s.Gb(1),s.kc("ngIf",e.submitted&&e.f.lastName.errors),s.Gb(4),s.kc("ngClass",s.mc(21,B,e.submitted&&e.f.nickName.errors)),s.Gb(1),s.kc("ngIf",e.submitted&&e.f.nickName.errors),s.Gb(4),s.kc("ngClass",s.mc(23,B,e.submitted&&e.f.birthDay.errors)),s.Gb(1),s.kc("ngIf",e.submitted&&e.f.birthDay.errors),s.Gb(4),s.kc("ngClass",s.mc(25,B,e.submitted&&e.f.phoneNumber.errors)),s.Gb(1),s.kc("ngIf",e.submitted&&e.f.phoneNumber.errors),s.Gb(4),s.kc("ngClass",s.mc(27,B,e.submitted&&e.f.email.errors)),s.Gb(1),s.kc("ngIf",e.submitted&&e.f.email.errors),s.Gb(4),s.kc("ngClass",s.mc(29,B,e.submitted&&e.f.password.errors)),s.Gb(1),s.kc("ngIf",e.submitted&&e.f.password.errors),s.Gb(4),s.kc("ngClass",s.mc(31,B,e.submitted&&e.f.confirmPassword.errors)),s.Gb(1),s.kc("ngIf",e.submitted&&e.f.confirmPassword.errors))},directives:[a.u,a.l,a.g,a.a,a.k,a.e,b.i,b.k],styles:[""]}),r})();var A=t("tk/3");const D=[{path:"login",component:h},{path:"register",component:U},{path:"logout",component:(()=>{class r{constructor(r,e,t){this.authService=r,this.tokenStorageService=e,this.router=t}ngOnInit(){this.authService.logout(),this.tokenStorageService.signOut(),console.log(this.tokenStorageService.getToken()),this.router.navigate(["blogs/list"])}}return r.\u0275fac=function(e){return new(e||r)(s.Rb(o.a),s.Rb(n.a),s.Rb(i.b))},r.\u0275cmp=s.Lb({type:r,selectors:[["app-logout"]],decls:2,vars:0,template:function(r,e){1&r&&(s.Wb(0,"p"),s.yc(1,"logout works!"),s.Vb())},styles:[""]}),r})()}];let O=(()=>{class r{}return r.\u0275mod=s.Pb({type:r}),r.\u0275inj=s.Ob({factory:function(e){return new(e||r)},providers:[],imports:[[b.b,a.p,A.c,i.e.forChild(D),a.h]]}),r})()}}]);